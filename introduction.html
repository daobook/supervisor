
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>介绍 &#8212; Supervisor 4.3.0.dev0 文档</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/repoze.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="安装" href="installing.html" />
    <link rel="prev" title="Supervisor：过程控制系统" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="introduction">
<h1>介绍<a class="headerlink" href="#introduction" title="永久链接至标题">¶</a></h1>
<section id="overview">
<h2>概述<a class="headerlink" href="#overview" title="永久链接至标题">¶</a></h2>
<p>Supervisor 是客户端/服务器系统，允许用户在类 UNIX 操作系统上控制多个进程。它的灵感来源于以下几点：</p>
<p>便利</p>
<blockquote>
<div><p>通常需要写 <code class="docutils literal notranslate"><span class="pre">rc.d</span></code> 脚本用于每个单个流程实例是不方便的。<code class="docutils literal notranslate"><span class="pre">rc.d</span></code> 脚本是进程初始化/自动启动/管理的一种极好的最低公分母形式，但它们的编写和维护可能非常痛苦。此外，<code class="docutils literal notranslate"><span class="pre">rc.d</span></code> 脚本不能自动重新启动崩溃的进程，许多程序在崩溃时不能正确地重新启动自己。supervisor 将进程作为它的子进程启动，可以配置为在崩溃时自动重启它们。它还可以被自动配置为在自己调用时启动进程。</p>
</div></blockquote>
<p>精度</p>
<blockquote>
<div><p>在 UNIX 上准确地获取进程的 up/down 状态通常是很困难的。pidfile 经常说谎。supervise 以子进程的形式启动进程，因此它总是知道子进程的真实 up/down 状态，并且可以方便地查询这些数据。</p>
</div></blockquote>
<p>Delegation</p>
<blockquote>
<div><p>需要控制进程状态的用户通常只需要这样做。他们不希望或不需要对运行进程的机器进行完整的 shell 访问。监听 “low” TCP 端口的进程通常需要作为根用户启动并重新启动（UNIX 的一个错误特性）。通常情况下，允许 “normal” 用户停止或重新启动这样的进程是完全没问题的，但为他们提供 shell 访问权限通常是不切实际的，而为他们提供根访问权限或 sudo 访问权限通常是不可能的。向他们解释这个问题的存在也是很困难的。如果 supervisor 以 root 用户的身份启动，就可以允许“普通”用户控制这些进程，而不需要向他们解释问题的复杂性。Supervisorctl 允许对机器进行非常有限的访问，本质上允许用户通过从简单的 shell 或 web UI 中发出 “stop”、“start” 和 “restart” 命令来查看进程状态和控制受监控的子进程。</p>
</div></blockquote>
<p>进程组</p>
<blockquote>
<div><p>进程通常需要按组启动和停止，有时甚至需要按“优先顺序”。通常很难向人们解释如何做到这一点。Supervisor 允许你给进程分配优先级，并允许用户通过 supervisorctl 客户端发出命令，比如 “start all” 和 “restart all”，它们按照预先分配的优先级顺序启动它们。此外，进程可以被分组为“进程组”，一组逻辑上相关的进程可以作为一个单元停止和启动。</p>
</div></blockquote>
</section>
<section id="features">
<h2>特性<a class="headerlink" href="#features" title="永久链接至标题">¶</a></h2>
<p>简单</p>
<blockquote>
<div><p>Supervisor 通过简单的 ini 风格的配置文件进行配置，很容易学习。它为每个进程提供了许多选项，让您的生活更轻松，比如重新启动失败的进程和自动日志旋转。</p>
</div></blockquote>
<p>集中</p>
<blockquote>
<div><p>Supervisor 为您提供一个启动、停止和监视流程的地方。进程可以单独控制，也可以分组控制。您可以配置 Supervisor 提供本地或远程命令行和 web 界面。</p>
</div></blockquote>
<p>高效</p>
<blockquote>
<div><p>“Supervisor 通过 fork/exec 启动子进程，子进程不会守护。当一个进程终止时，操作系统会立即向 Supervisor 发出信号，而不是像某些解决方案那样依赖于麻烦的 PID 文件和周期性轮询来重启失败的进程。</p>
</div></blockquote>
<p>可扩展</p>
<blockquote>
<div><p>“Supervisor 有简单的事件通知协议，用任何语言编写的程序都可以用来监视它，还有一个用于控制的 XML-RPC 接口。它还使用扩展点构建，可以被 Python 开发人员利用。</p>
</div></blockquote>
<p>兼容</p>
<blockquote>
<div><p>“Supervisor 几乎可以处理除 Windows 之外的所有东西。它在 Linux、Mac OS X、Solaris 和 FreeBSD 上得到了测试和支持。它完全是用 Python 编写的，所以安装不需要 C 编译器。</p>
</div></blockquote>
<p>证明</p>
<blockquote>
<div><p>虽然 Supervisor 在今天的开发非常活跃，但它并不是一款新软件。Supervisor 已经存在多年，已经在许多服务器上使用。</p>
</div></blockquote>
</section>
<section id="supervisor-components">
<h2>Supervisor 组件<a class="headerlink" href="#supervisor-components" title="永久链接至标题">¶</a></h2>
<p><strong class="program">supervisord</strong></p>
<blockquote>
<div><p>supervisor 的服务器端名为 <strong class="program">supervisord</strong>。它负责在自己的调用中启动子程序，响应来自客户端的命令，重新启动崩溃或退出的子进程，记录子进程的 <code class="docutils literal notranslate"><span class="pre">stdout</span></code> 和 <code class="docutils literal notranslate"><span class="pre">stderr</span></code> 输出，并生成和处理子进程生命周期中相应点的事件。</p>
<p>服务器进程使用一个配置文件。它通常位于 <code class="file docutils literal notranslate"><span class="pre">/etc/supervisor</span> <span class="pre">.conf</span></code> 中。这个配置文件是一个 “Windows-INI” 风格的配置文件。通过适当的文件系统权限来保证这个文件的安全是很重要的，因为它可能包含未加密的用户名和密码。</p>
</div></blockquote>
<p><strong class="program">supervisorctl</strong></p>
<blockquote>
<div><p>supervisor 的客户端命令行名为 <strong class="program">supervisorctl</strong>。它为 <strong class="program">supervisord</strong> 提供了类似 shell 的接口。从 <strong class="program">supervisorctl</strong> 中，用户可以连接到不同的 <strong class="program">supervisord</strong> 进程(一次一个)，获取被 <strong class="program">supervisord</strong> 进程控制的子进程的状态，停止和启动子进程，获取 <strong class="program">supervisord</strong> 进程的运行列表。</p>
<p>命令行客户端通过 UNIX 域套接字或 internet (TCP)套接字与服务器进行对话。服务器可以断言客户端的用户在执行命令之前应该提供身份验证凭据。客户端进程通常使用与服务器相同的配置文件，但任何包含 <code class="docutils literal notranslate"><span class="pre">[supervisorctl]</span></code> 部分的配置文件都可以工作。</p>
</div></blockquote>
<p>Web 服务器</p>
<blockquote>
<div><p>(稀疏的)web 用户界面的功能类似 <strong class="program">supervisorctl</strong> 可以通过浏览器访问，如果你针对一个互联网插座启动 <strong class="program">supervisord</strong>。访问服务器 URL(例如:在激活配置文件的 <code class="docutils literal notranslate"><span class="pre">[inet_http_server]</span></code> 部分后，通过 web 界面查看和控制进程状态。</p>
</div></blockquote>
<p>XML-RPC 接口</p>
<blockquote>
<div><p>服务于 web UI 的 HTTP 服务器也提供了 XML-RPC 接口，可以用来询问和控制管理器及其运行的程序。参考 <a class="reference internal" href="api.html#xml-rpc"><span class="std std-ref">XML-RPC API Documentation</span></a>。</p>
</div></blockquote>
</section>
<section id="platform-requirements">
<h2>平台需求<a class="headerlink" href="#platform-requirements" title="永久链接至标题">¶</a></h2>
<p>Supervisor 已经经过测试，已知运行在 Linux (Ubuntu 18.04)， Mac OS X (10.4/10.5/10.6)， Solaris (10 for Intel)和FreeBSD 6.1。它可能在大多数 UNIX 系统上运行良好。</p>
<p>在任何版本的 Windows 下，Supervisor 都不会运行。</p>
<p>Supervisor 将用于 Python 3 3.4 或更高版本以及 Python 2 2.7 版本。</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo_hi.gif" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">Supervisor</a></h1>








<h3>导航</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">介绍</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">概述</a></li>
<li class="toctree-l2"><a class="reference internal" href="#features">特性</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supervisor-components">Supervisor 组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="#platform-requirements">平台需求</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">运行 Supervisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">配置文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="subprocess.html">Subprocesses</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="xmlrpc.html">Extending Supervisor’s XML-RPC API</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading Supervisor 2 to 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Resources and Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">XML-RPC API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">第三方应用程序和库</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="上一章">Supervisor：过程控制系统</a></li>
      <li>Next: <a href="installing.html" title="下一章">安装</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2004-2022, Agendaless Consulting and Contributors.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/introduction.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>